import Head from 'next/head'
import styles from '../styles/Homepage.module.css'
import React from 'react'
import Select from 'react-select'
import { useState } from 'react'
import Link from 'next/link'

export default function Home() {
  //State
  const [DepartureAirportInput, SetDepartureAirportInput] = useState("")
  const [ArrivalAirportInput, SetArrivalAirportInput] = useState("")
  const [DateInput, SetDateInput] = useState("")
  const [DepartureArrivalDateInputDisabled, SetDepartureArrivalDateInputDisabled] = useState(false)
  const [FlightNumberDisabled, SetFlightNumberDisabled] = useState(false)
  const [FlightNumberInput, SetFlightNumberInput] = useState("")

  //Dropdown Input Options
  const options = [
    { value: 'KSDF', label: 'KSDF' },
    { value: 'KDTW', label: 'KDTW' },
  ]
  //Dropdown Input Styles
  const customStyles = {
    control: base => ({
      ...base,
      height: 50,
      fontSize: 20,
      opacity: DepartureArrivalDateInputDisabled ? .3 : 1,
    })
  }

  function OnChangeFlightNumberInputCallback() {
    SetFlightNumberDisabled(false)
    SetDepartureArrivalDateInputDisabled(true)
    SetDepartureAirportInput("")
    SetArrivalAirportInput("")
    SetDateInput("")
  }
  function OnChangeArrivalDepartureDateInputCallback() {
    SetDepartureArrivalDateInputDisabled(false)
    SetFlightNumberDisabled(true)
    SetFlightNumberInput("")
  }
  return (
    <div className={styles.container}>
      <Head>
        <title>DestiNation-Home</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/planeLogo.ico"></link>
      </Head>

      <header className={styles.header}>
        <Link href='/about'>
          <h2 className={styles.marginRemove}>About Us</h2>
        </Link>
      </header>

      <main className={styles.main}>
        <div className={styles.leftcontainer}>
          <h1 className={styles.hometitle} >DestiNation</h1>
          <img className={styles.homeimage} src='./Svgs/airplane.png'></img>
        </div>
        <div className={styles.rightcontainer}>
          <form className={styles.formcontainer}>
            <div className={styles.labelinputcontainer}>
              <label className={styles.formlabels}>Departure Airport</label>
              <Select instanceId="DepartureAirportInput" options={options} styles={customStyles} onChange={(event) => SetDepartureAirportInput(event ? event.value : "", OnChangeArrivalDepartureDateInputCallback())} value={options.find(item => item.value === DepartureAirportInput)} />
            </div>
            <div className={styles.labelinputcontainer}>
              <label className={styles.formlabels}>Arrival Airport</label>
              <Select instanceId="ArrivalAirportInput" options={options} styles={customStyles} onChange={(event) => SetArrivalAirportInput(event ? event.value : "", OnChangeArrivalDepartureDateInputCallback())} value={options.find(item => item.value === ArrivalAirportInput)} />
            </div>
            <div className={styles.labelinputcontainer}>
              <label className={styles.formlabels}>Date</label>
              <input type="date" className={styles.forminputs} style={{ opacity: DepartureArrivalDateInputDisabled ? .3 : 1 }} onChange={(event) => SetDateInput(event.target.value, OnChangeArrivalDepartureDateInputCallback())} value={DateInput}></input>
            </div>
            <div className={styles.labelinputcontainer}>
              <label className={styles.formlabels}>Flight Number</label>
              <input type="input" className={styles.forminputs} style={{ opacity: FlightNumberDisabled ? .3 : 1 }} onChange={(event) => SetFlightNumberInput(event.target.value, OnChangeFlightNumberInputCallback())} value={FlightNumberInput} maxLength={6} placeholder="Ex-DL9367"></input>
            </div>
            <input className={styles.formSubmit} type="submit" value="Find Flights"></input>
          </form>
        </div>
      </main>
    </div>
  )
}
